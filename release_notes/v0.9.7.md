# Sage v0.9.7 Release Notes

**Release Date:** 2025-12-31
**Version:** v0.9.7

## üöÄ Key Highlights

### 1. Codebase Modernization & Stability
- **Type Safety**: Achieved full compliance with Python 3.11+ type hints across core modules (`sagents`, `app`). All code now passes strict `mypy` checks.
- **Code Style**: Optimized codebase using `ruff` for linting and formatting, ensuring consistent style and preventing common errors.
- **Bug Fixes**: Resolved critical runtime issues, including bare exception handling in `tool_manager.py` and import ordering in `eml_parser.py`.

### 2. Parameter Unification & Deprecation
- **Standardized Arguments**: Aligned startup parameters across `sage_server.py`, `sage_cli.py`, and `sage_demo.py`.
- **Deprecation**: Permanently removed legacy `llm_*` parameters (e.g., `llm_api_key`, `llm_model_name`) in favor of the standardized `default_llm_*` prefix. This eliminates ambiguity and simplifies configuration.

### 3. Advanced Context Management & Infinite Memory
- **Context Budget**: Integrated granular context budget controls into all interfaces (Server, CLI, Demo).
- **Infinite Relevant Memory**: Achieved infinite relevant memory within a session by intelligently managing context windows and history retention.
- **New Parameters**:
  - `--context_history_ratio`: Control the ratio of history to retain.
  - `--context_active_ratio`: Manage the ratio of active context.
  - `--context_max_new_message_ratio`: Limit the impact of new messages.
  - `--context_recent_turns`: Specify the number of recent turns to prioritize.
- **Benefit**: These controls allow for precise token usage management and better long-context performance.

### 4. Enhanced Multi-language Support
- **Localization**: Improved multi-language support across the framework, ensuring better handling of non-English inputs and outputs.
- **I18n**: Enhanced internationalization for the Web UI and CLI responses.

### 5. Component Improvements
- **Demo & CLI**: Refactored `ComponentManager` and `StreamingHandler` in `sage_demo.py` for improved type safety and parameter propagation.
- **Consistency**: Ensured that the Web Demo and CLI offer the same configuration power as the main Server.

## ‚ö†Ô∏è Breaking Changes
- **Parameter Removal**: The `llm_*` parameters are no longer supported. Please update your startup scripts to use `default_llm_*` (e.g., `default_llm_api_key`).

## üìù Upgrade Instructions
To upgrade to v0.9.7:
1. Pull the latest changes from the `main` branch.
2. Update dependencies: `pip install -r requirements.txt`.
3. Update your startup commands to use the new parameter names.
